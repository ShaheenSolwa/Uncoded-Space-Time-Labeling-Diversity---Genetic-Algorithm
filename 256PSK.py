from finalPSK import *

map = {
0:complex(1,0),1:complex(0.9997,0.0245),2:complex(0.9973,0.0736),3:complex(0.9988,0.0491),
    4:complex(0.9853,0.171),5:complex(0.9892,0.1467),6:complex(0.9952,0.098),7:complex(0.9925,0.1224),
    8:complex(0.933,0.3599),9:complex(0.9415,0.3369),10:complex(0.9569,0.2903),11:complex(0.9495,0.3137),
    12:complex(0.9808,0.1951),13:complex(0.9757,0.2191),14:complex(0.9638,0.2667),15:complex(0.97,0.243),
    16:complex(0.7242,0.6895),17:complex(0.741,0.6716),18:complex(0.773,0.6344),19:complex(0.7572,0.6532),
    20:complex(0.8315,0.5556),21:complex(0.8176,0.5758),22:complex(0.7883,0.6152),23:complex(0.8030,0.5957),24:complex(0.9239,0.3827),
    25:complex(0.9142,0.4052),26:complex(0.8932,0.4496),27:complex(0.9040,0.4276),28:complex(0.8449,0.535),
    29:complex(0.8577,0.5141),30:complex(0.8819,0.4714),31:complex(0.8701,0.4929),32:complex(0.0245,0.9997),33:complex(0.0491,0.9988),
    34:complex(0.0980,0.9952),35:complex(0.0736,0.9973),36:complex(0.1951,0.9808),37:complex(0.1710,0.9853),
    38:complex(0.1224,0.9925),39:complex(0.1467,0.9892),40:complex(0.3827,0.9239),41:complex(0.3599,0.933),
    42:complex(0.3137,0.9495),43:complex(0.3369,0.9415),44:complex(0.2191,0.9757),45:complex(0.243,0.97),
    46:complex(0.2903,0.9569),47:complex(0.2667,0.9638),48:complex(0.7071,0.7071),49:complex(0.6895,0.7242),
    50:complex(0.6532,0.7572),51:complex(0.6716,0.741),52:complex(0.5758,0.8176),53:complex(0.5957,0.8032),
    54:complex(0.6344,0.733),55:complex(0.6152,0.7883),56:complex(0.4052,0.9142),57:complex(0.4276,0.904),
    58:complex(0.4714,0.8819),59:complex(0.4496,0.8932),60:complex(0.5556,0.8315),61:complex(0.535,0.8449),
    62:complex(0.4929,0.8701),63:complex(0.5141,0.8577),64:complex(-0.9997,0.0245),65:complex(-0.9988,0.0491),
    66:complex(-0.9952,0.098),67:complex(-0.9973,0.0736),68:complex(-0.9808,0.1951),69:complex(-0.9853,0.171),
    70:complex(-0.9925,0.1224),71:complex(-0.9892,0.1467),72:complex(-0.9239,0.3827),73:complex(-0.933,0.3599),
    74:complex(-0.9495,0.3137),75:complex(-0.9415,0.3369),76:complex(-0.9757,0.2191),77:complex(-0.97,0.243),
    78:complex(-0.9569,0.2903),79:complex(-0.9638,0.2667),80:complex(-0.7071,0.7071),81:complex(-0.7242,0.6895),
    82:complex(-0.7572,0.6532),83:complex(-0.741,0.6716),84:complex(-0.8176,0.5758),85:complex(-0.8032,0.5957),
    86:complex(-0.773,0.6344),87:complex(-0.7883,0.6152),88:complex(-0.9142,0.4052),89:complex(-0.904,0.4276),
    90:complex(-0.8819,0.4714),91:complex(-0.8932,0.4496),92:complex(-0.8315,0.5556),93:complex(-0.8449,0.535),
    94:complex(-0.8701,0.4929),95:complex(-0.8577,0.5141),96:complex(0,1),97:complex(-0.0245,0.9997),
    98:complex(-0.0736,0.9973),99:complex(-0.0491,0.9988),100:complex(-0.171,0.9853),101:complex(-0.1467,0.9892),
    102:complex(-0.098,0.9952),103:complex(-0.1224,0.9925),104:complex(-0.3599,0.933),105:complex(-0.3369,0.9415),
    106:complex(-0.2903,0.9569),107:complex(-0.3137,0.9495),108:complex(-0.1951,0.9808),109:complex(-0.2191,0.9757),
    110:complex(-0.2667,0.9638),111:complex(-0.243,0.97),112:complex(-0.6895,0.7242),113:complex(-0.6716,0.741),
    114:complex(-0.6344,0.773),115:complex(-0.6532,0.7572),116:complex(-0.5556,0.8315),117:complex(-0.5758,0.8176),
    118:complex(-0.6152,0.7883),119:complex(-0.5957,0.8032),120:complex(-0.3827,0.9239),121:complex(-0.4052,0.9142),
    122:complex(-0.4496,0.8932),123:complex(-0.4276,0.904),124:complex(-0.535,0.8449),125:complex(-0.5141,0.8577),
    126:complex(-0.4714,0.8819),127:complex(-0.4929,0.8701),

    128:complex(0.9997,-0.0245),129:complex(0.9988,-0.0491),130:complex(0.9952,-0.098),131:complex(0.9973,-0.0736),
    132:complex(0.9808,-0.1951),133:complex(0.9853,-0.171),134:complex(0.9925,-0.1224),135:complex(0.9892,-0.1467),
    136:complex(0.9239,-0.3827),137:complex(0.933,-0.3599),138:complex(0.9495,-0.3137),139:complex(0.9415,-0.3369),
    140:complex(0.9757,-0.2191),141:complex(0.97,-0.243),142:complex(0.9569,-0.2903),143:complex(0.9638,-0.2667),
    144:complex(0.7071,-0.7071),145:complex(0.7242,-0.6895),146:complex(0.7572,-0.6532),147:complex(0.741,-0.6716),
    148:complex(0.8176,-0.5758),149:complex(0.8032,-0.5957),150:complex(0.773,-0.6344),151:complex(0.7883,-0.6152),
    152:complex(0.9142,-0.4052),153:complex(0.904,-0.4276),154:complex(0.8819,-0.4714),155:complex(0.8932,-0.4496),
    156:complex(0.8315,-0.5556),157:complex(0.8449,-0.535),158:complex(0.8701,-0.4929),159:complex(0.8577,-0.5141),
    160:complex(0,-1),161:complex(0.0245,-0.9997),162:complex(0.0736,-0.9973),163:complex(0.0491,-0.9988),
    164:complex(0.171,-0.9853),165:complex(0.1467,-0.9892),166:complex(0.098,-0.9952),167:complex(0.1224,-0.9925),
    168:complex(0.3599,-0.933),169:complex(0.3369,-0.9415),170:complex(0.2903,-0.9569),171:complex(0.3137,-0.9495),
    172:complex(0.1951,-0.9808),173:complex(0.2191,-0.9757),174:complex(0.2667,-0.9638),175:complex(0.243,-0.97),
    176:complex(0.6895,-0.7242),177:complex(0.6716,-0.741),178:complex(0.6344,-0.773),179:complex(0.6532,-0.7572),
    180:complex(0.5556,-0.8315),181:complex(0.5758,-0.8176),182:complex(0.6152,-0.7883),183:complex(0.5957,-0.8032),
    184:complex(0.3827,-0.9239),185:complex(0.4052,-0.9142),186:complex(0.4496,-0.8932),187:complex(0.4276,-0.904),
    188:complex(0.535,-0.8449),189:complex(0.5141,-0.8577),190:complex(0.4714,-0.8819),191:complex(0.4929,-0.8701),
    192:complex(-1,0),193:complex(-0.9997,-0.0245),194:complex(-0.9973,-0.0736),195:complex(-0.9988,-0.0491),
    196:complex(-0.9853,-0.171),197:complex(-0.9892,-0.1467),198:complex(-0.9952,-0.0980),199:complex(-0.9925,-0.1224),
    200:complex(-0.9330,-0.3599),201:complex(-0.9415,-0.3369),202:complex(-0.9569,-0.2903),203:complex(-0.9495,-0.3137),
    204:complex(-0.9808,-0.1951),205:complex(-0.9757,-0.2191),206:complex(-0.9638,-0.2667),207:complex(-0.97,-0.243),
    208:complex(-0.7242,-0.6895),209:complex(-0.741,-0.6716),210:complex(-0.773,-0.6344),211:complex(-0.7572,-0.6532),212:complex(-0.8315,-0.5556),
    213:complex(-0.8176,-0.5758),214:complex(-0.7883,-0.6152),215:complex(-0.8032,-0.5957),216:complex(-0.9239,-0.3827),
    217:complex(-0.9142,-0.4052),218:complex(-0.8932,-0.4496),219:complex(-0.904,-0.4276),220:complex(-0.8449,-0.535),
    221:complex(-0.8577,-0.5141),222:complex(-0.8819,-0.4714),223:complex(-0.8701,-0.4929),224:complex(-0.0245,-0.9997),
    225:complex(-0.0491,-0.9988),226:complex(-0.098,-0.9952),227:complex(-0.0736,-0.9973),228:complex(-0.1951,-0.9808),
    229:complex(-0.171,-0.9853),230:complex(-0.1224,-0.9925),231:complex(-0.1467,-0.9892),232:complex(-0.3827,-0.9239),
    233:complex(-0.3599,-0.933),234:complex(-0.3137,-0.9495),235:complex(-0.3369,-0.9415),236:complex(-0.2191,-0.9757),
    237:complex(-0.243,-0.97),238:complex(-0.2903,-0.9569),239:complex(-0.2667,-0.9638),240:complex(-0.7071,-0.7071),
    241:complex(-0.6895,-0.7242),242:complex(-0.6532,-0.7572),243:complex(-0.6716,-0.741),244:complex(-0.5758,-0.8176),
    245:complex(-0.5957,-0.8032),246:complex(-0.6344,-0.773),247:complex(-0.6152,-0.7883),248:complex(-0.4052,-0.9142),
    249:complex(-0.4276,-0.9040),250:complex(-0.4714,-0.8819),251:complex(-0.4496,-0.8932),252:complex(-0.5556,-0.8315),
    253:complex(-0.535,-0.8449),254:complex(-0.4929,-0.8701),255:complex(-0.5141,-0.8577)
}


mapper1 = tuple(x for x in range(0,256))
maps = [mapper1]
print(fitness(mapper1, mapper1, map))
#print(fitness(mapper, mapper2, map))
Maps = []
for i in range(10):
    ind = random.randint(0, len(maps)-1)
    Maps.append(maps[ind])
Maps = tuple(Maps)
A = []
#print(Maps)
for j in range(100000):
    C = crossoverPopulation(Maps, map)
    M = mutatePopulation(C, 0.30)
    A = AddToPopulation(Maps, M, A)
    #A = AddToPopulation(M, A)
    Maps = nextGeneration(mapper1, A, 10, map)
    print(rank_fitness(mapper1, Maps, map))
    A = []
print(Maps[0])